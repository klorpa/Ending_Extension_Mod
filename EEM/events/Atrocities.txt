#state bombardment event
province_event = {
	id = 23000
	title = "Bombing of $PROVINCENAME$"
	desc = "$PROVINCENAME$ has been bombed!"

	trigger = {

		owner = {
			war = yes
			war_countries = { has_country_modifier = strat_bombers } 	
		}

		OR = { 
			total_pops = 250000 
			has_building = naval_base
			is_capital = yes
			is_state_capital = yes
		}

		is_colonial = no
		NOT = { has_province_modifier = bomb_damage }
		NOT = { has_province_modifier = heavy_bomb_damage }
		controlled_by = THIS
	}

	mean_time_to_happen = { 
		months = 12

		modifier = {
			factor = 0.5
			owner = { NOT = { invention = machine_gun_armament } }
		}

		modifier = {
			factor = 0.5
			owner = { NOT = { invention = military_aviation } }
		}

		modifier = {
			factor = 1.25
			owner = { invention = late_interwar_fighters }
		}
		modifier = {
			factor = 1.25
			owner = { invention = improved_anti_aircraft_artillery }
		}
		modifier = {
			factor = 1.25
			owner = { invention = proximity_fuze }
		}
		modifier = {
			factor = 1.25
			owner = { invention = air_to_air_radar }
		}
		modifier = {
			factor = 2
			owner = { invention = early_warning_radar }
		}
		modifier = {
			factor = 2
			owner = { invention = civil_defense }
		}
		modifier = {
			factor = 1.25
			owner = { invention = rocket_powered_aircraft }
		}

		modifier = {
			factor = 0.8
			owner = { war_countries = { invention = late_interwar_fighters } }
		}
		modifier = {
			factor = 0.8
			owner = { war_countries = { invention = late_interwar_bombers } }
		}
		modifier = {
			factor = 0.5
			owner = { war_countries = { invention = saturation_bombing_doctrine } }
		}
		modifier = {
			factor = 0.5
			owner = { war_countries = { invention = operations_research } }
		}
		modifier = {
			factor = 0.8
			owner = { war_countries = { invention = gun_and_bomb_sights } }
		}
		modifier = {
			factor = 0.8
			owner = { war_countries = { invention = strategic_rocket } }
		}
		modifier = {
			factor = 0.8
			owner = { war_countries = { invention = turbojet } }
		}

		modifier = {
			factor = 4
			owner = { NOT = { war_countries = { brigades_compare = 1 } } } #you have larger army
		}

		modifier = {
			factor = 0.8
			owner = { war_countries = { brigades_compare = 2 } } #any enemy has larger army
		}
		modifier = {
			factor = 0.5
			owner = { war_countries = { brigades_compare = 3 } } #any enemy has larger army
		}


		modifier = {
			factor = 0.5
			owner = { NOT = { military_score = 100 } } #you have small air force
		}
		
		modifier = {
			factor = 2
			owner = { NOT = { war_countries = { military_score = 500 } } } #enemy has small air force
		}


		modifier = {
			factor = 2
			owner = { NOT = { war_countries = { capital_scope = { north_america } } } }
			continent = north_america
		}
		modifier = {
			factor = 2
			owner = { NOT = { war_countries = { capital_scope = { south_america } } } }
			continent = south_america
		}
		modifier = {
			factor = 2
			owner = { NOT = { war_countries = { capital_scope = { europe } } } }
			continent = europe
		}
		modifier = {
			factor = 2
			owner = { NOT = { war_countries = { capital_scope = { africa } } } }
			continent = africa
		}
		modifier = {
			factor = 2
			owner = { NOT = { war_countries = { capital_scope = { asia } } } }
			continent = asia
		}
		modifier = {
			factor = 2
			owner = { NOT = { war_countries = { capital_scope = { oceania } } } }
			continent = oceania
		}
		modifier = {
			factor = 2
			owner = { NOT = { war_countries = { capital_scope = { australia_new_zealand } } } }
			continent = australia_new_zealand
		}

		modifier = {
			factor = 2
			has_building = fort
		}
		
		modifier = {
			factor = 2
			country_units_in_province = THIS
		}

	}

	option = {
		name = "Oh no!"
        NWO = {
            change_variable = {
                which = bombing_counter
                value = 1
            }
        }
        add_province_modifier = { name = bomb_damage duration = 365 }
		any_pop = { reduce_pop = 0.99 }

		infrastructure = -1
		random = {
			chance = 25
			fort = -1
		}
		#random = {
		#	chance = 25
		#	naval_base = -1 #this deletes all naval base levels from the province for some reason. Yes, a level 6 naval base got reduced to level 0
		#}

        any_neighbor_province = {
            limit = {
				OR = { 
					total_pops = 250000 
					has_building = naval_base
					is_capital = yes
					is_state_capital = yes
				}
				is_colonial = no
				owned_by = THIS
				controlled_by = THIS
				NOT = { has_province_modifier = bomb_damage }
				NOT = { has_province_modifier = heavy_bomb_damage }
            }
				
            add_province_modifier = { name = bomb_damage duration = 365 }
			any_pop = { reduce_pop = 0.99 }
			
			infrastructure = -1
			random = {
				chance = 25
				fort = -1
			}
			#random = {
			#	chance = 25
			#	naval_base = -1
			#}
        }

	}

}

province_event = {
	id = 23001
	title = "Heavy Bombing of $PROVINCENAME$"
	desc = "$PROVINCENAME$ has been heavily bombed!"

	trigger = {

		owner = {
			war = yes
			war_countries = { has_country_modifier = strat_bombers } 	
            war_countries = { invention = saturation_bombing_doctrine }
            war_countries = { invention = operations_research }
            war_countries = { invention = gun_and_bomb_sights }
            war_countries = { brigades_compare = 1 } #enemy has larger army
		}

		OR = { 
			total_pops = 250000 
			has_building = naval_base
			is_capital = yes
			is_state_capital = yes
		}

		is_colonial = no
		NOT = { has_province_modifier = heavy_bomb_damage }
		
		controlled_by = THIS
	}

	mean_time_to_happen = { 
		months = 12

		modifier = {
			factor = 0.5
			owner = { NOT = { invention = machine_gun_armament } }
		}

		modifier = {
			factor = 0.5
			owner = { NOT = { invention = military_aviation } }
		}

		modifier = {
			factor = 1.25
			owner = { invention = proximity_fuze }
		}
		modifier = {
			factor = 1.25
			owner = { invention = air_to_air_radar }
		}
		modifier = {
			factor = 2
			owner = { invention = early_warning_radar }
		}
		modifier = {
			factor = 1.25
			owner = { invention = civil_defense }
		}
		modifier = {
			factor = 1.25
			owner = { invention = rocket_powered_aircraft }
		}

		modifier = {
			factor = 0.8
			owner = { war_countries = { invention = strategic_rocket } }
		}
		modifier = {
			factor = 0.8
			owner = { war_countries = { invention = turbojet } }
		}


		modifier = {
			factor = 0.8
			owner = { war_countries = { brigades_compare = 2 } } #any enemy has larger army
		}
		modifier = {
			factor = 0.5
			owner = { war_countries = { brigades_compare = 3 } } #any enemy has larger army
		}


		modifier = {
			factor = 0.5
			owner = { NOT = { military_score = 100 } } #you have small air force
		}
		
		modifier = {
			factor = 2
			owner = { NOT = { war_countries = { military_score = 500 } } } #enemy has small air force
		}

		modifier = {
			factor = 2
			owner = { NOT = { war_countries = { capital_scope = { north_america } } } }
			continent = north_america
		}
		modifier = {
			factor = 2
			owner = { NOT = { war_countries = { capital_scope = { south_america } } } }
			continent = south_america
		}
		modifier = {
			factor = 2
			owner = { NOT = { war_countries = { capital_scope = { europe } } } }
			continent = europe
		}
		modifier = {
			factor = 2
			owner = { NOT = { war_countries = { capital_scope = { africa } } } }
			continent = africa
		}
		modifier = {
			factor = 2
			owner = { NOT = { war_countries = { capital_scope = { asia } } } }
			continent = asia
		}
		modifier = {
			factor = 2
			owner = { NOT = { war_countries = { capital_scope = { oceania } } } }
			continent = oceania
		}
		modifier = {
			factor = 2
			owner = { NOT = { war_countries = { capital_scope = { australia_new_zealand } } } }
			continent = australia_new_zealand
		}


		modifier = {
			factor = 2
			has_building = fort
		}
		
		modifier = {
			factor = 2
			country_units_in_province = THIS
		}

	}

	option = {
		name = "Oh no!"
        NWO = {
            change_variable = {
                which = heavy_bombing_counter
                value = 1
            }
        }
        remove_province_modifier = bomb_damage
        add_province_modifier = { name = heavy_bomb_damage duration = 365 }
		any_pop = { reduce_pop = 0.985 }

        #Dresden population in 1939: 642,000, 25,000 casulties = 0.04

		infrastructure = -1
		random = {
			chance = 25
			fort = -1
		}

        any_neighbor_province = {
            limit = {
				OR = { 
					total_pops = 250000 
					has_building = naval_base
					is_capital = yes
					is_state_capital = yes
				}
				is_colonial = no
				owned_by = THIS
				controlled_by = THIS
				NOT = { has_province_modifier = heavy_bomb_damage }
            }
			remove_province_modifier = bomb_damage
            add_province_modifier = { name = heavy_bomb_damage duration = 365 }
			any_pop = { reduce_pop = 0.985 }
			
			infrastructure = -1
			random = {
				chance = 25
				fort = -1
			}
        }
	}
}







### end bombing ###

country_event = {
	id = 23100
	title = "End Strategic Bombardment"
	desc = "Our air force is too weak to maintain our strategic bombing missions!"
	picture = "end_strategic_bombardment"

	trigger = {
		has_country_modifier = strat_bombers
		NOT = { money = 500000 }
		NOT = { military_score = 250 }
		is_disarmed = yes
	}

	mean_time_to_happen = { 
		months = 1
	}

	option = {
		name = "End the bomber raids!"
		remove_country_modifier = strat_bombers
	}
}

country_event = {
	id = 23101
	title = "End Strategic Bombardment"
	desc = "The war is over, it's time to disband our bombers."
	picture = "end_strategic_bombardment"

	trigger = {
		war = no
		has_country_modifier = strat_bombers
	}

	mean_time_to_happen = { 
		months = 1
	}

	option = {
		name = "End the bomber raids!"
		remove_country_modifier = strat_bombers
	}
}

##### War crimes #####
country_event = {
    id = 23110
    title = "Atrocities"
    desc = "EVTDESC23110"
    picture = "war_crimes"
    trigger = {
        war = yes
        OR = {
            war_policy = pro_military
            war_policy = jingoism
        }
        civilized = yes
        war_countries = {
            any_owned_province = {
                controlled_by = THIS
                NOT = { province_control_days = 365 }
                NOT = { has_province_modifier = the_massacre }
            }
        }
    }

    mean_time_to_happen = {
        months = 480
		modifier = {
			factor = 0.8
			government = fascist_dictatorship
		}
		modifier = {
			factor = 0.8
			invention = rhetoric_of_hate
		}
		modifier = {
			factor = 0.8
			war_policy = jingoism
		}
		modifier = {
			factor = 2
			has_country_modifier = signed_the_geneva_convention
		}
		modifier = {
			factor = 0.5
			has_country_modifier = withdrew_from_geneva_convention
		}
    }

    option = {
        name = "We must cover this up!"
        random_list = {
            25 = { badboy = 0 }
            50 = { badboy = 0.25 }
            25 = { badboy = 0.5 }
        }
        prestige = -5

        any_country = {
           limit = {
                tag = THIS
                press_rights = free_press
            }
            random_list = {
                25 = { badboy = 0 }
                50 = { badboy = 0.25 }
                25 = { badboy = 0.5 }
            }
            prestige = -5
        }

		random_country = {
            limit = {
                war_countries = { tag = THIS }
                any_owned_province = {
                    controlled_by = THIS
                    NOT = { province_control_days = 365 }
                    NOT = { has_province_modifier = the_massacre }
                }
            }
            country_event = 23111
        }
    }
}

country_event = {
    id = 23111
    title = "$FROMCOUNTRY$ Atrocities"
    desc = "EVTDESC23111"
    picture = "war_crimes"
    is_triggered_only = yes

    option = {
        name = "This is terrible!"
        relation = {
            who = FROM
            value = -50
        }
        any_owned = {
            limit = {
                controlled_by = FROM
                NOT = { province_control_days = 365 }
                NOT = { has_province_modifier = the_massacre }
            }
            add_province_modifier = {
                name = the_massacre
                duration = 90
            }
        }

        NWO = {
            change_variable = {
                which = war_crime_counter
                value = 1
            }
        }
    }
}
