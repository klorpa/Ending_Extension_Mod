country_event = {
    id = 165208
    title = "Our Lodge Masters Arrive!"
    desc = "For some reason the event that gives generals works fine for Taiping but doesn't work for the Red Turbans."
    picture = "tiandihui_statue"
    fire_only_once = yes
	
    trigger = {
        NOT = { has_country_flag = ming_leaders_arrived }
        tag = RTR
        exists = QNG
    }

    mean_time_to_happen = {
        days = 1
    }

    option = {
        name = "Excellent!"
        any_pop = {
            consciousness = -5
            militancy = -5
        }

        set_country_flag = ming_leaders_arrived
        add_country_modifier = { name = fanatic_army duration = 1825 }

        define_general = {
            name = "Chen Kai"
            personality = charismatic
            background = gifted_administrator
        }

        define_general = {
            name = "Li Wenmao"
            personality = diplomatic
            background = gifted_administrator
        }

        define_general = {
            name = "Huang Dingfeng"
            personality = scared
            background = spoiled
        }

        define_general = {
            name = "Li Wencai"
            personality = indifferent
            background = old_school
        }

        define_general = {
            name = "Li Jingui"
            personality = audacious
            background = expert_raider
        }

        random_owned = {
            limit = { QNG = { land_reform = yes_land_reform } }
            THIS = { economic_reform = yes_land_reform }
        }

        random_owned = {
            limit = { QNG = { admin_reform = yes_admin_reform } }
            THIS = { economic_reform = yes_admin_reform }
        }

        random_owned = {
            limit = { QNG = { finance_reform = yes_finance_reform } }
            THIS = { economic_reform = yes_finance_reform }
        }

        random_owned = {
            limit = { QNG = { finance_reform = finance_reform_two } }
            THIS = { economic_reform = finance_reform_two }
        }

        random_owned = {
            limit = { QNG = { monetary_reform = yes_monetary_reform } }
            THIS = { economic_reform = yes_monetary_reform }
        }

        random_owned = {
            limit = { QNG = { monetary_reform = monetary_reform_two } }
            THIS = { economic_reform = monetary_reform_two activate_technology = no_standard }
        }

        random_owned = {
            limit = { QNG = { education_reform = yes_education_reform } }
            THIS = { economic_reform = yes_education_reform }
        }

        random_owned = {
            limit = { QNG = { research_reform = yes_research_reform } }
            THIS = { economic_reform = yes_research_reform activate_technology = late_enlightenment_philosophy }
        }

        random_owned = {
            limit = { QNG = { foreign_training = yes_foreign_training } }
            THIS = { military_reform = yes_foreign_training }
        }

        random_owned = {
            limit = { QNG = { foreign_weapons = yes_foreign_weapons } }
            THIS = { military_reform = yes_foreign_weapons activate_technology = flintlock_rifles }
        }

        random_owned = {
            limit = { QNG = { foreign_officers = yes_foreign_officers } }
            THIS = { military_reform = yes_foreign_officers activate_technology = military_staff_system }
        }

        random_owned = {
            limit = { QNG = { army_schools = yes_army_schools } }
            THIS = { military_reform = yes_army_schools }
        }

        random_owned = {
            limit = { QNG = { foreign_naval_officers = yes_foreign_naval_officers } }
            THIS = { military_reform = yes_foreign_naval_officers }
        }

        random_owned = {
            limit = { QNG = { naval_schools = yes_naval_schools } }
            THIS = { military_reform = yes_naval_schools }
        }

        random_owned = {
            limit = { QNG = { foreign_navies = yes_foreign_navies } }
            THIS = { military_reform = yes_foreign_navies activate_technology = clipper_design activate_technology = steamers }
        }

        random_owned = {
            limit = { QNG = { western_shipyards = yes_western_shipyards } }
            THIS = { military_reform = yes_western_shipyards activate_technology = post_nelsonian_thought }
        }

        random_owned = {
            limit = { QNG = { foreign_artillery = yes_foreign_artillery } }
            THIS = { military_reform = yes_foreign_artillery activate_technology = bronze_muzzle_loaded_artillery }
        }
        government = theocracy
        ruling_party_ideology = conservative
        clr_country_flag = communist_gov
        clr_country_flag = absolute_monarchy_gov
        clr_country_flag = semi_constitutional_monarchy_gov
        clr_country_flag = constitutional_monarchy_gov
        clr_country_flag = democracy_gov
        clr_country_flag = presidential_dictatorship_gov
        clr_country_flag = fascist_gov
        clr_country_flag = anarcho_liberal_gov
        set_country_flag = theocratic_government
        clr_country_flag = election_started
        clr_country_flag = conservative_party_in_power
        clr_country_flag = liberal_party_in_power
        clr_country_flag = reactionary_party_in_power
        clr_country_flag = socialist_party_in_power
        clr_country_flag = communist_party_in_power
        clr_country_flag = fascist_party_in_power
        clr_country_flag = anarcho_liberal_party_in_power
    }
}


country_event = {
    id = 166401
    title = "Our Lodge Masters Arrive!"
    desc = "For some reason the event that gives generals works fine for Taiping but doesn't work for the Red Turbans."
    picture = "tiandihui_statue"
    fire_only_once = yes
	
    trigger = {
        NOT = { has_country_flag = ming_leaders_arrived }
        tag = RTR
        exists = TPG
    }

    mean_time_to_happen = {
        days = 1
    }

    option = {
        name = "Excellent!"
        any_pop = {
            consciousness = -5
            militancy = -5
        }

        set_country_flag = ming_leaders_arrived
        add_country_modifier = { name = fanatic_army duration = 1825 }

        define_general = {
            name = "Chen Kai"
            personality = charismatic
            background = gifted_administrator
        }

        define_general = {
            name = "Li Wenmao"
            personality = diplomatic
            background = gifted_administrator
        }

        define_general = {
            name = "Huang Dingfeng"
            personality = scared
            background = spoiled
        }

        define_general = {
            name = "Li Wencai"
            personality = indifferent
            background = old_school
        }

        define_general = {
            name = "Li Jingui"
            personality = audacious
            background = expert_raider
        }

        random_owned = {
            limit = { TPG = { land_reform = yes_land_reform } }
            THIS = { economic_reform = yes_land_reform }
        }

        random_owned = {
            limit = { TPG = { admin_reform = yes_admin_reform } }
            THIS = { economic_reform = yes_admin_reform }
        }

        random_owned = {
            limit = { TPG = { finance_reform = yes_finance_reform } }
            THIS = { economic_reform = yes_finance_reform }
        }

        random_owned = {
            limit = { TPG = { finance_reform = finance_reform_two } }
            THIS = { economic_reform = finance_reform_two }
        }

        random_owned = {
            limit = { TPG = { monetary_reform = yes_monetary_reform } }
            THIS = { economic_reform = yes_monetary_reform }
        }

        random_owned = {
            limit = { TPG = { monetary_reform = monetary_reform_two } }
            THIS = { economic_reform = monetary_reform_two activate_technology = no_standard }
        }

        random_owned = {
            limit = { TPG = { education_reform = yes_education_reform } }
            THIS = { economic_reform = yes_education_reform }
        }

        random_owned = {
            limit = { TPG = { research_reform = yes_research_reform } }
            THIS = { economic_reform = yes_research_reform activate_technology = late_enlightenment_philosophy }
        }

        random_owned = {
            limit = { TPG = { foreign_training = yes_foreign_training } }
            THIS = { military_reform = yes_foreign_training }
        }

        random_owned = {
            limit = { TPG = { foreign_weapons = yes_foreign_weapons } }
            THIS = { military_reform = yes_foreign_weapons activate_technology = flintlock_rifles }
        }

        random_owned = {
            limit = { TPG = { foreign_officers = yes_foreign_officers } }
            THIS = { military_reform = yes_foreign_officers activate_technology = military_staff_system }
        }

        random_owned = {
            limit = { TPG = { army_schools = yes_army_schools } }
            THIS = { military_reform = yes_army_schools }
        }

        random_owned = {
            limit = { TPG = { foreign_naval_officers = yes_foreign_naval_officers } }
            THIS = { military_reform = yes_foreign_naval_officers }
        }

        random_owned = {
            limit = { TPG = { naval_schools = yes_naval_schools } }
            THIS = { military_reform = yes_naval_schools }
        }

        random_owned = {
            limit = { TPG = { foreign_navies = yes_foreign_navies } }
            THIS = { military_reform = yes_foreign_navies activate_technology = clipper_design activate_technology = steamers }
        }

        random_owned = {
            limit = { TPG = { western_shipyards = yes_western_shipyards } }
            THIS = { military_reform = yes_western_shipyards activate_technology = post_nelsonian_thought }
        }

        random_owned = {
            limit = { TPG = { foreign_artillery = yes_foreign_artillery } }
            THIS = { military_reform = yes_foreign_artillery activate_technology = bronze_muzzle_loaded_artillery }
        }
        government = theocracy
        ruling_party_ideology = conservative
        clr_country_flag = communist_gov
        clr_country_flag = absolute_monarchy_gov
        clr_country_flag = semi_constitutional_monarchy_gov
        clr_country_flag = constitutional_monarchy_gov
        clr_country_flag = democracy_gov
        clr_country_flag = presidential_dictatorship_gov
        clr_country_flag = fascist_gov
        clr_country_flag = anarcho_liberal_gov
        set_country_flag = theocratic_government
        clr_country_flag = election_started
        clr_country_flag = conservative_party_in_power
        clr_country_flag = liberal_party_in_power
        clr_country_flag = reactionary_party_in_power
        clr_country_flag = socialist_party_in_power
        clr_country_flag = communist_party_in_power
        clr_country_flag = fascist_party_in_power
        clr_country_flag = anarcho_liberal_party_in_power
    }
}


country_event = {
    id = 165110
    title = "Chinese Woes"
    desc = "For some reason AI uncivs often gets stuck with tons of research points yet doesn't want to pass reforms."
    picture = "commodore_perry"
	
    trigger = {
        OR = { tag = RTR tag = TPG tag = QNG tag = CHI }
        ai = yes
        civilized = no
        NOT = { has_country_modifier = academic_confusion }
        NOT = { has_country_modifier = reactionary_demands }
        year = 1900
    }

    mean_time_to_happen = {
        months = 60
    }

    option = {
        name = "Actually, never mind."

        ai_chance = {
            factor = 10
            modifier = {
                factor = 10
                ideology = reactionary
            }
            modifier = {
                factor = 0.5
                war = yes
            }
            modifier = {
                factor = 0.5
                has_recently_lost_war = yes
            }
        }
    }

    option = {
        name = "Land Reform"

        add_country_modifier = {
            name = academic_confusion
            duration = 2500
        }

        research_points = -10000
        THIS = { economic_reform = yes_land_reform }

        any_pop = {
            scaled_militancy = {
                ideology = liberal
                factor = 0.5
            }
            scaled_militancy = {
                ideology = conservative
                factor = 1
            }
            scaled_militancy = {
                ideology = reactionary
                factor = 3
            }
        }

        ai_chance = {
            factor = 10
            modifier = {
                factor = 0
                land_reform = yes_land_reform
            }
        }
    }

    option = {
        name = "Administrative Reform"

        add_country_modifier = {
            name = academic_confusion
            duration = 3000
        }

        research_points = -12000
        THIS = { economic_reform = yes_admin_reform }

        any_pop = {
            scaled_militancy = {
                ideology = liberal
                factor = 0.5
            }
            scaled_militancy = {
                ideology = conservative
                factor = 1
            }
            scaled_militancy = {
                ideology = reactionary
                factor = 3
            }
        }

        ai_chance = {
            factor = 10
            modifier = {
                factor = 0
                admin_reform = yes_admin_reform
            }
        }
    }

    #Finance and monetary reform ignored because it has 2 steps and who takes those anyways lmao

    option = {
        name = "Education Reform"

        add_country_modifier = {
            name = academic_confusion
            duration = 3125
        }

        research_points = -12500
        plurality = 5
        THIS = { economic_reform = yes_education_reform }

        any_pop = {
            scaled_militancy = {
                ideology = liberal
                factor = 0.5
            }
            scaled_militancy = {
                ideology = conservative
                factor = 1
            }
            scaled_militancy = {
                ideology = reactionary
                factor = 3
            }
        }

        ai_chance = {
            factor = 10
            modifier = {
                factor = 0
                education_reform = yes_education_reform
            }
        }
    }

    option = {
        name = "Research Reform"

        add_country_modifier = {
            name = academic_confusion
            duration = 5500
        }

        research_points = -22000
        THIS = { economic_reform = yes_research_reform }
        plurality = 5
        activate_technology = late_enlightenment_philosophy

        any_pop = {
            scaled_militancy = {
                ideology = liberal
                factor = 0.5
            }
            scaled_militancy = {
                ideology = conservative
                factor = 1
            }
            scaled_militancy = {
                ideology = reactionary
                factor = 3
            }
        }

        ai_chance = {
            factor = 10
            modifier = {
                factor = 0
                research_reform = yes_research_reform
            }
        }
    }

    #skip transport, firearms, pre_indust, and industrial reforms because they cost money

    option = {
        name = "Foreign Training"

        add_country_modifier = {
            name = academic_confusion
            duration = 2250
        }

        research_points = -9000
        THIS = { military_reform = yes_foreign_training }

        any_pop = {
            scaled_militancy = {
                ideology = liberal
                factor = 2
            }
            scaled_militancy = {
                ideology = conservative
                factor = 1
            }
            scaled_militancy = {
                ideology = reactionary
                factor = 3
            }
        }

        ai_chance = {
            factor = 10
            modifier = {
                factor = 0
                foreign_training = yes_foreign_training
            }
            modifier = {
                factor = 0
                NOT = {
					AND = {
                        has_country_flag = using_foreign_ships
                        has_country_flag = using_foreign_shipyards
                        has_country_flag = using_foreign_weapons
                        has_country_flag = using_foreign_artillery
                    }
				}
            }
            modifier = {
                factor = 2
                war = yes
            }
            modifier = {
                factor = 2
                has_recently_lost_war = yes
            }
        }
    }


    option = {
        name = "Foreign Weapons"

        add_country_modifier = {
            name = academic_confusion
            duration = 2750
        }

        research_points = -11000
        THIS = { military_reform = yes_foreign_weapons }
        activate_technology = flintlock_rifles
        set_country_flag = using_foreign_weapons

        any_pop = {
            scaled_militancy = {
                ideology = liberal
                factor = 2
            }
            scaled_militancy = {
                ideology = conservative
                factor = 1
            }
            scaled_militancy = {
                ideology = reactionary
                factor = 3
            }
        }

        ai_chance = {
            factor = 10
            modifier = {
                factor = 0
                foreign_weapons = yes_foreign_weapons
            }
            modifier = {
                factor = 2
                war = yes
            }
            modifier = {
                factor = 2
                has_recently_lost_war = yes
            }
        }
    }

    #military_constructions cost money

    option = {
        name = "Foreign Officers"

        add_country_modifier = {
            name = academic_confusion
            duration = 2750
        }

        research_points = -11000
        THIS = { military_reform = yes_foreign_officers }
        activate_technology = military_staff_system

        any_pop = {
            scaled_militancy = {
                ideology = liberal
                factor = 2
            }
            scaled_militancy = {
                ideology = conservative
                factor = 1
            }
            scaled_militancy = {
                ideology = reactionary
                factor = 3
            }
        }

        ai_chance = {
            factor = 10
            modifier = {
                factor = 0
                foreign_officers = yes_foreign_officers
            }
            modifier = {
                factor = 0
                NOT = {
					AND = {
                        has_country_flag = using_foreign_ships
                        has_country_flag = using_foreign_shipyards
                        has_country_flag = using_foreign_weapons
                        has_country_flag = using_foreign_artillery
                    }
				}
            }
            modifier = {
                factor = 2
                war = yes
            }
            modifier = {
                factor = 2
                has_recently_lost_war = yes
            }
        }
    }

    option = {
        name = "Army Schools"

        add_country_modifier = {
            name = academic_confusion
            duration = 2750
        }

        research_points = -11000
        THIS = { military_reform = yes_army_schools }

        any_pop = {
            scaled_militancy = {
                ideology = liberal
                factor = 2
            }
            scaled_militancy = {
                ideology = conservative
                factor = 1
            }
            scaled_militancy = {
                ideology = reactionary
                factor = 3
            }
        }

        ai_chance = {
            factor = 10
            modifier = {
                factor = 0
                army_schools = yes_army_schools
            }
            modifier = {
                factor = 0
                NOT = {
					AND = {
                        has_country_flag = using_foreign_ships
                        has_country_flag = using_foreign_shipyards
                        has_country_flag = using_foreign_weapons
                        has_country_flag = using_foreign_artillery
                    }
				}
            }
            modifier = {
                factor = 2
                war = yes
            }
            modifier = {
                factor = 2
                has_recently_lost_war = yes
            }
        }
    }

    option = {
        name = "Foreign Naval Officers"

        add_country_modifier = {
            name = academic_confusion
            duration = 3000
        }

        research_points = -12000
        THIS = { military_reform = yes_foreign_naval_officers }

        any_pop = {
            scaled_militancy = {
                ideology = liberal
                factor = 2
            }
            scaled_militancy = {
                ideology = conservative
                factor = 1
            }
            scaled_militancy = {
                ideology = reactionary
                factor = 3
            }
        }

        ai_chance = {
            factor = 10
            modifier = {
                factor = 0
                foreign_naval_officers = yes_foreign_naval_officers
            }
            modifier = {
                factor = 0
                NOT = {
					AND = {
                        has_country_flag = using_foreign_ships
                        has_country_flag = using_foreign_shipyards
                        has_country_flag = using_foreign_weapons
                        has_country_flag = using_foreign_artillery
                    }
				}
            }
            modifier = {
                factor = 2
                war = yes
            }
            modifier = {
                factor = 2
                has_recently_lost_war = yes
            }
            modifier = {
                factor = 0
                NOT = { any_owned_province = { port = yes } }
            }
        }
    }

    option = {
        name = "Naval Schools"

        add_country_modifier = {
            name = academic_confusion
            duration = 3000
        }

        research_points = -12000
        THIS = { military_reform = yes_naval_schools }

        any_pop = {
            scaled_militancy = {
                ideology = liberal
                factor = 2
            }
            scaled_militancy = {
                ideology = conservative
                factor = 1
            }
            scaled_militancy = {
                ideology = reactionary
                factor = 3
            }
        }

        ai_chance = {
            factor = 10
            modifier = {
                factor = 0
                naval_schools = yes_naval_schools
            }
            modifier = {
                factor = 0
                NOT = {
					AND = {
                        has_country_flag = using_foreign_ships
                        has_country_flag = using_foreign_shipyards
                        has_country_flag = using_foreign_weapons
                        has_country_flag = using_foreign_artillery
                    }
				}
            }
            modifier = {
                factor = 2
                war = yes
            }
            modifier = {
                factor = 2
                has_recently_lost_war = yes
            }
            modifier = {
                factor = 0
                NOT = { any_owned_province = { port = yes } }
            }
        }
    }


    option = {
        name = "Foreign Navies"

        add_country_modifier = {
            name = academic_confusion
            duration = 4000
        }

        research_points = -16000
        THIS = { military_reform = yes_foreign_navies }

        activate_technology = clipper_design
        activate_technology = steamers
        set_country_flag = using_foreign_ships

        any_pop = {
            scaled_militancy = {
                ideology = liberal
                factor = 2
            }
            scaled_militancy = {
                ideology = conservative
                factor = 1
            }
            scaled_militancy = {
                ideology = reactionary
                factor = 3
            }
        }

        ai_chance = {
            factor = 10
            modifier = {
                factor = 0
                foreign_navies = yes_foreign_navies
            }
            modifier = {
                factor = 0
                NOT = {
					AND = {
                        has_country_flag = using_foreign_weapons
                        has_country_flag = using_foreign_artillery
                    }
				}
            }
            modifier = {
                factor = 2
                war = yes
            }
            modifier = {
                factor = 2
                has_recently_lost_war = yes
            }
            modifier = {
                factor = 0
                NOT = { any_owned_province = { has_building = naval_base } }
            }
        }
    }

    option = {
        name = "Western Shipyards"

        add_country_modifier = {
            name = academic_confusion
            duration = 3000
        }

        research_points = -12000
        THIS = { military_reform = yes_western_shipyards }

        activate_technology = post_nelsonian_thought
        set_country_flag = using_foreign_shipyards

        any_pop = {
            scaled_militancy = {
                ideology = liberal
                factor = 2
            }
            scaled_militancy = {
                ideology = conservative
                factor = 1
            }
            scaled_militancy = {
                ideology = reactionary
                factor = 3
            }
        }

        ai_chance = {
            factor = 10
            modifier = {
                factor = 0
                western_shipyards = yes_western_shipyards
            }
            modifier = {
                factor = 0
                NOT = {
					AND = {
                        has_country_flag = using_foreign_weapons
                        has_country_flag = using_foreign_artillery
                    }
				}
            }
            modifier = {
                factor = 2
                war = yes
            }
            modifier = {
                factor = 2
                has_recently_lost_war = yes
            }
            modifier = {
                factor = 0
                NOT = { any_owned_province = { port = yes } }
            }
        }
    }

    option = {
        name = "Foreign Artillery"

        add_country_modifier = {
            name = academic_confusion
            duration = 2750
        }

        research_points = -11000
        THIS = { military_reform = yes_western_shipyards }

        activate_technology = bronze_muzzle_loaded_artillery
        set_country_flag = using_foreign_artillery

        any_pop = {
            scaled_militancy = {
                ideology = liberal
                factor = 2
            }
            scaled_militancy = {
                ideology = conservative
                factor = 1
            }
            scaled_militancy = {
                ideology = reactionary
                factor = 3
            }
        }

        ai_chance = {
            factor = 10
            modifier = {
                factor = 0
                foreign_artillery = yes_foreign_artillery
            }
            modifier = {
                factor = 2
                war = yes
            }
            modifier = {
                factor = 2
                has_recently_lost_war = yes
            }
        }
    }
}
